<div class="mt-8" data-controller="artwork-modal">
  <!-- Artworks Grid -->
  <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 p-4">
    <% @artworks.each do |artwork| %>
      <div class="group relative cursor-pointer overflow-hidden rounded-lg aspect-[3/4]"
           data-action="click->artwork-modal#open"
           data-artwork-modal-title-param="<%= artwork.title %>"
           data-artwork-modal-description-param="<%= artwork.description %>"
           data-artwork-modal-medium-param="<%= artwork.medium %>"
           data-artwork-modal-year-param="<%= artwork.year %>"
           data-artwork-modal-image-param="<%= artwork.image.attached? ? url_for(artwork.image) : '' %>">

        <% if artwork.image.attached? %>
          <div class="absolute inset-0 bg-cover bg-center transition-transform duration-300 ease-in-out group-hover:scale-105"
               style="background-image: url('<%= url_for(artwork.image.variant(resize_to_fill: [400, 533])) %>')"></div>
        <% else %>
          <div class="absolute inset-0 bg-gray-200 dark:bg-gray-800"></div>
        <% end %>

        <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/10 to-transparent"></div>
        <div class="relative flex flex-col justify-end p-4 h-full">
          <p class="text-white text-base font-bold leading-tight line-clamp-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
            <%= artwork.title %>
          </p>
        </div>
      </div>
    <% end %>
  </div>

  <!-- Artwork Detail Modal -->
  <div data-artwork-modal-target="modal"
       class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/10 backdrop-blur-sm p-4"
       data-action="click->artwork-modal#closeBackground">
    <div class="w-full max-w-6xl max-h-[90vh] bg-background-light dark:bg-background-dark rounded-xl shadow-2xl flex flex-col md:flex-row overflow-hidden"
         data-action="click->artwork-modal#stopPropagation">

      <!-- Image Section -->
      <div class="w-full md:w-2/3 flex-shrink-0 bg-gray-200 dark:bg-gray-900 flex items-center justify-center">
        <img data-artwork-modal-target="image"
             class="w-full h-full object-contain max-h-[90vh]"
             alt="Artwork">
      </div>

      <!-- Details Section -->
      <div class="relative w-full md:w-1/3 flex flex-col p-6 sm:p-8 overflow-y-auto bg-white dark:bg-gray-900">
        <button data-action="click->artwork-modal#close"
                class="absolute top-4 right-4 text-gray-500 border-b dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors">
          <span class="material-symbols-outlined">close</span>
        </button>

        <div class="flex-grow">
          <h1 data-artwork-modal-target="title"
              class="text-2xl sm:text-3xl font-extrabold text-gray-900 dark:text-white mb-4">
          </h1>

          <div data-artwork-modal-target="description"
               class="text-gray-600 dark:text-gray-300 text-base font-normal leading-relaxed">
          </div>
        </div>

        <div class="mt-8 flex-shrink-0">
          <div class="border-t border-gray-200/50 dark:border-gray-700/50 pt-4 flex items-center justify-between text-sm text-gray-500 dark:text-gray-400">
            <span data-artwork-modal-target="medium"></span>
            <span data-artwork-modal-target="year"></span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
