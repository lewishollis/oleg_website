<!-- Page Heading -->
<div class="flex flex-wrap justify-between gap-3 p-4">
  <h1 class="text-[#111318] dark:text-white text-4xl font-black leading-tight tracking-[-0.033em] min-w-72">Works</h1>
</div>

<!-- Filter Chips -->
<div class="flex gap-2 p-3 overflow-x-auto" data-controller="project-filter">
  <%= link_to projects_path,
      data: { action: "click->project-filter#filter" },
      class: "flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-lg pl-4 pr-4 transition-all #{params[:project_id].blank? ? 'font-bold shadow-lg' : 'hover:bg-gray-300 dark:hover:bg-gray-600'}",
      style: params[:project_id].blank? ? 'background-color: #f97316; color: #ffffff;' : 'background-color: #e5e7eb; color: #1f2937;' do %>
    <p class="text-sm font-medium leading-normal">All</p>
  <% end %>
  <% Project.published.with_artworks.by_position.each do |project| %>
    <%= link_to projects_path(project_id: project.id),
        data: { action: "click->project-filter#filter" },
        class: "flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-lg pl-4 pr-4 transition-all #{params[:project_id].to_i == project.id ? 'font-bold shadow-lg' : 'hover:bg-gray-300 dark:hover:bg-gray-600'}",
        style: params[:project_id].to_i == project.id ? 'background-color: #f97316; color: #ffffff;' : 'background-color: #e5e7eb; color: #1f2937;' do %>
      <p class="text-sm font-medium leading-normal"><%= project.title %></p>
    <% end %>
  <% end %>
</div>

<!-- Artworks Grid -->
<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 p-4">
  <% @projects.each do |project| %>
    <% project.artworks.each do |artwork| %>
      <%= link_to project_path(project), class: "group" do %>
        <div class="flex flex-col gap-3 pb-3">
          <div class="w-full bg-center bg-no-repeat aspect-[3/4] bg-cover rounded-lg overflow-hidden transform transition-transform duration-300 group-hover:scale-105 bg-gray-200 dark:bg-gray-800">
            <% if artwork.image.attached? %>
              <%= image_tag artwork.image.variant(resize_to_fill: [400, 533]),
                  alt: artwork.title,
                  loading: "lazy",
                  class: "w-full h-full object-cover" %>
            <% end %>
          </div>
          <div>
            <p class="text-[#111318] dark:text-white text-base font-medium leading-normal"><%= artwork.title %></p>
            <p class="text-[#616f89] dark:text-gray-400 text-sm font-normal leading-normal">
              <%= artwork.year %><%= ", #{artwork.medium}" if artwork.medium.present? %>
            </p>
          </div>
        </div>
      <% end %>
    <% end %>
  <% end %>
</div>
